<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/mule.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/mule-ee.xsd">
  <sub-flow name="get-course-grades-by-courseid-sub-flow" doc:id="11c09a75-3b61-451b-b44c-5ef9de9a85a2" >
    <logger level="INFO" doc:name="Start Logger" doc:id="5d8c2a83-9d82-44c4-b438-b66f076fa9d4" message="Start get-course-grades-by-courseid-sub-flow" category="${logger.category}.get-course-grades-by-courseid-sub-flow" />
    <ee:transform doc:name="Get Assignment Grades By CourseId Payload" doc:id="0f1c44ad-453b-4f48-8d55-154662a55ccc" >
      <ee:message />
      <ee:variables >
        <ee:set-variable variableName="method" ><![CDATA["GET"]]></ee:set-variable>
        <ee:set-variable resource="dwl/get-course-grade-request.dwl" variableName="canvasPath" />
      </ee:variables>
    </ee:transform>
    <logger level="INFO" doc:name="Before Request Canvas Call" doc:id="620511d5-d514-4d7d-9285-5bdc7dc0761e" message="Before Request Canvas Call" category="${logger.category}.get-course-grades-by-courseid-sub-flow" />
    <logger level="DEBUG" doc:name="DEBUG: Before Request Canvas Call" doc:id="ee2bd74e-66f8-4025-8936-0b97414cf099" message="#[payload]" category="${logger.category}.get-course-grades-by-courseid-sub-flow" />
    <flow-ref doc:name="request-canvas-sub-flow" doc:id="d89421cf-5d87-4b49-aec4-562f82f69e54" name="request-canvas-sub-flow" />
    <logger level="INFO" doc:name="After Request Canvas Call" doc:id="0ae6b788-95a6-460f-8ad1-2b40dfb2ceb7" message="After Request Canvas Call" category="${logger.category}.get-course-grades-by-courseid-sub-flow" />
    <logger level="DEBUG" doc:name="DEBUG: After Request Canvas Call" doc:id="deb4eb71-5dba-4448-9bdd-f271816d25a5" message="#[payload]" category="${logger.category}.get-course-grades-by-courseid-sub-flow" />
    <choice doc:name="Is Error Check" doc:id="ccf75bf9-f08a-4668-83b8-e8c7eeeaa431" >
      <when expression="#[vars.isError == true]" >
        <raise-error doc:name="CANVAS_SAPI:GET_ASSIGNMENT_GRADE_FAILED" doc:id="faf68804-278a-4d5d-bf57-eebdfed2aa73" type="CANVAS_SAPI:GET_ASSIGNMENT_GRADE_FAILED" description="#[payload]" />
      </when>
      <otherwise >
        <logger level="INFO" doc:name="INFO Logger" doc:id="c7f9e0bc-1b2a-4dc7-9452-ffd5539c0e4d" message="Assignment Grade fetched successfully" category="${logger.category}.get-course-grades-by-courseid-sub-flow" />
        <ee:transform doc:name="Response Payload" doc:id="8e65d5fa-ef94-4cf2-b536-2a9332573fae" >
          <ee:message >
            <ee:set-payload resource="dwl/get-grade-by-courseid-response.dwl" />
          </ee:message>
        </ee:transform>
      </otherwise>
    </choice>
    <logger level="INFO" doc:name="End Logger" doc:id="c7435db7-3f0c-4bbc-8e92-21f64afcf3c8" message="End get-course-grades-by-courseid-sub-flow" category="${logger.category}.get-course-grades-by-courseid-sub-flow" />
  </sub-flow>
</mule>
