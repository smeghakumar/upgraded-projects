<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:munit="http://www.mulesoft.org/schema/mule/munit" xmlns:munit-tools="http://www.mulesoft.org/schema/mule/munit-tools"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xsi:schemaLocation="
		http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/mule.xsd
		http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd
		http://www.mulesoft.org/schema/mule/munit-tools  http://www.mulesoft.org/schema/mule/munit-tools/current/mule-munit-tools.xsd">
	<munit:config name="grade-test-suite.xml" />
  <munit:test name="get-course-grades-by-courseid-sub-flow-test" doc:id="cf8f0485-c4a7-427f-82d8-6cd978e009ac" description="Test to validate successful execution of retrieving course grades by courseid">
    <munit:behavior >
      <munit-tools:mock-when doc:name="Canvas Api Call" doc:id="5fbebf96-4c86-4ac1-95f7-b1d3b1ef75cd" processor="http:request">
        <munit-tools:with-attributes >
          <munit-tools:with-attribute whereValue="Canvas API" attributeName="doc:name" />
          <munit-tools:with-attribute whereValue="609d8e70-f848-469f-8436-39f66871fd4f" attributeName="doc:id" />
          <munit-tools:with-attribute whereValue="httpsCanvasRequestConfig" attributeName="config-ref" />
        </munit-tools:with-attributes>
        <munit-tools:then-return >
          <munit-tools:payload value="#[output application/json&#10;---&#10;readUrl('classpath://getCourseGradesByCourseid/mock_grades_by_courseid_response.dwl',&quot;application/json&quot;)]" mediaType="application/json" />
        </munit-tools:then-return>
      </munit-tools:mock-when>
    </munit:behavior>
    <munit:execution >
      <munit:set-event doc:name="Set CourseId" doc:id="0628ea44-00af-4de8-bfbc-16aee176cfbb" >
        <munit:variables >
          <munit:variable key="courseId" value="1" mediaType="application/json" />
        </munit:variables>
      </munit:set-event>
      <flow-ref doc:name="get-course-grades-by-courseid-sub-flow" doc:id="29142825-1dde-4b53-9ba6-197f227ae5bd" name="get-course-grades-by-courseid-sub-flow"/>
    </munit:execution>
    <munit:validation >
      <munit-tools:assert-equals doc:name="isError Variable" doc:id="f19e2cb4-5923-42db-a107-867708c95e6f" actual="#[vars.isError]" expected="#[false]" />
    </munit:validation>
  </munit:test>


</mule>
